<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Substation Logbook - Dashboard</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Top Navigation -->
    <nav class="navbar">
        <div class="navbar-brand">
            <svg width="40" height="40" viewBox="0 0 60 60">
                <circle cx="30" cy="30" r="28" fill="#fff" opacity="0.1"/>
                <path d="M30 10 L50 30 L30 50 L10 30 Z" fill="none" stroke="#fff" stroke-width="3"/>
                <circle cx="30" cy="30" r="8" fill="#fff"/>
            </svg>
            <span>Substation Logbook</span>
        </div>

        <div class="navbar-menu">
            <div class="navbar-user">
                <span id="navbar-username">Loading...</span>
                <span class="user-role" id="navbar-role"></span>
            </div>
            <button class="btn btn-logout" onclick="logout()">Logout</button>
        </div>
    </nav>

    <!-- Sidebar Navigation -->
    <div class="sidebar" id="sidebar">
        <ul class="sidebar-menu">
            <li class="menu-item active" data-page="dashboard">
                <span class="menu-icon">üìä</span>
                <span class="menu-text">Dashboard</span>
            </li>
            <li class="menu-item" data-page="post">
                <span class="menu-icon">‚úèÔ∏è</span>
                <span class="menu-text">Post Entry</span>
            </li>
            <li class="menu-item" data-page="search">
                <span class="menu-icon">üîç</span>
                <span class="menu-text">Search Logs</span>
            </li>
            <li class="menu-item admin-only" data-page="technicians">
                <span class="menu-icon">üë•</span>
                <span class="menu-text">Technicians</span>
            </li>
            <li class="menu-item admin-only" data-page="substations">
                <span class="menu-icon">üèóÔ∏è</span>
                <span class="menu-text">Substations</span>
            </li>
            <li class="menu-item admin-only" data-page="users">
                <span class="menu-icon">üë§</span>
                <span class="menu-text">Users</span>
            </li>
            <li class="menu-item admin-only" data-page="settings">
                <span class="menu-icon">‚öôÔ∏è</span>
                <span class="menu-text">Settings</span>
            </li>
            <li class="menu-item" data-page="reports">
                <span class="menu-icon">üìà</span>
                <span class="menu-text">Reports</span>
            </li>
        </ul>
    </div>

    <!-- Main Content Area -->
    <main class="main-content">
        <!-- Dashboard Page -->
        <div class="page active" id="dashboard-page">
            <div class="page-header">
                <h2>Dashboard</h2>
                <p>Recent logbook entries and summary</p>
            </div>

            <div class="dashboard-cards">
                <div class="stat-card">
                    <div class="stat-icon" style="background: #28a745;">üìù</div>
                    <div class="stat-content">
                        <h3 id="total-entries">0</h3>
                        <p>Total Entries</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: #17a2b8;">‚úÖ</div>
                    <div class="stat-content">
                        <h3 id="normal-entries">0</h3>
                        <p>Normal</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: #ffc107;">‚ö†Ô∏è</div>
                    <div class="stat-content">
                        <h3 id="warning-entries">0</h3>
                        <p>Warning</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: #dc3545;">üö®</div>
                    <div class="stat-content">
                        <h3 id="critical-entries">0</h3>
                        <p>Critical</p>
                    </div>
                </div>
            </div>

            <div class="section-header">
                <h3>Recent Entries</h3>
                <button class="btn btn-secondary" onclick="loadRecentEntries()">Refresh</button>
            </div>

            <div id="recent-entries-container">
                <div class="loading-spinner">Loading entries...</div>
            </div>
        </div>

        <!-- Post Entry Page -->
        <div class="page" id="post-page">
            <div class="page-header">
                <h2>Post Logbook Entry</h2>
                <p>Create a new entry in the logbook</p>
            </div>

            <form id="postEntryForm" class="form-card">
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="entry-datetime">Date & Time *</label>
                        <input type="datetime-local" id="entry-datetime" name="entry_datetime" required>
                    </div>

                    <div class="form-group col-md-6">
                        <label for="severity">Severity *</label>
                        <select id="severity" name="severity" required>
                            <option value="Normal">Normal</option>
                            <option value="Warning">Warning</option>
                            <option value="Critical">Critical</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="event-category">Event Category</label>
                        <select id="event-category" name="event_category_id">
                            <option value="">-- Select Category --</option>
                        </select>
                    </div>

                    <div class="form-group col-md-6">
                        <label for="equipment">Equipment</label>
                        <select id="equipment" name="equipment_id">
                            <option value="">-- Select Equipment --</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Technicians Involved *</label>
                    <div id="technicians-checkboxes" class="checkbox-grid">
                        <!-- Dynamically populated -->
                    </div>
                    <div id="selected-technicians" class="selected-items"></div>
                </div>

                <div class="form-group">
                    <label for="message">Message / Description * 
                        <span class="help-text">
                            Use # for technicians, @ for time, / for date, & for location
                        </span>
                    </label>
                    <textarea id="message" name="message" rows="6" required 
                              placeholder="Enter detailed description of the event..."></textarea>
                    
                    <!-- Context Menu for special symbols -->
                    <div id="context-menu" class="context-menu" style="display: none;">
                        <div class="context-menu-content"></div>
                    </div>
                </div>

                <div class="form-section-header">
                    <h4>Electrical Parameters (Optional)</h4>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="voltage">Voltage (kV)</label>
                        <input type="number" id="voltage" name="voltage_kv" step="0.01" placeholder="0.00">
                    </div>

                    <div class="form-group col-md-4">
                        <label for="current">Current (A)</label>
                        <input type="number" id="current" name="current_a" step="0.01" placeholder="0.00">
                    </div>

                    <div class="form-group col-md-4">
                        <label for="power">Power (MW)</label>
                        <input type="number" id="power" name="power_mw" step="0.001" placeholder="0.000">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="frequency">Frequency (Hz)</label>
                        <input type="number" id="frequency" name="frequency_hz" step="0.01" placeholder="50.00">
                    </div>

                    <div class="form-group col-md-4">
                        <label for="power-factor">Power Factor</label>
                        <input type="number" id="power-factor" name="power_factor" step="0.001" min="0" max="1" placeholder="0.000">
                    </div>

                    <div class="form-group col-md-4">
                        <label for="energy">Energy (MWh)</label>
                        <input type="number" id="energy" name="energy_mwh" step="0.001" placeholder="0.000">
                    </div>
                </div>

                <div class="form-group">
                    <label for="attachment">Attachment (Max 10MB)</label>
                    <input type="file" id="attachment" name="attachment" 
                           accept=".jpg,.jpeg,.png,.pdf,.doc,.docx,.xls,.xlsx">
                    <small class="help-text">Allowed: JPG, PNG, PDF, DOC, XLS (Max 10MB)</small>
                </div>

                <div class="form-group" id="email-notification-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="send-email" name="send_email_notification">
                        <span>Send email notification to assigned Engineer</span>
                    </label>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <span class="btn-text">Post Entry</span>
                        <span class="btn-loader" style="display: none;">
                            <span class="spinner"></span> Posting...
                        </span>
                    </button>
                    <button type="reset" class="btn btn-secondary">Clear Form</button>
                </div>

                <div class="alert" id="post-alert" style="display: none;"></div>
            </form>
        </div>

        <!-- Search Page -->
        <div class="page" id="search-page">
            <div class="page-header">
                <h2>Search Logbook Entries</h2>
                <p>Search and filter entries by various criteria</p>
            </div>

            <div class="form-card">
                <form id="searchForm">
                    <div class="form-row">
                        <div class="form-group col-md-3">
                            <label for="search-start-date">Start Date</label>
                            <input type="date" id="search-start-date" name="start_date">
                        </div>

                        <div class="form-group col-md-3">
                            <label for="search-end-date">End Date</label>
                            <input type="date" id="search-end-date" name="end_date">
                        </div>

                        <div class="form-group col-md-3">
                            <label for="search-severity">Severity</label>
                            <select id="search-severity" name="severity">
                                <option value="">All</option>
                                <option value="Normal">Normal</option>
                                <option value="Warning">Warning</option>
                                <option value="Critical">Critical</option>
                            </select>
                        </div>

                        <div class="form-group col-md-3">
                            <label for="search-category">Category</label>
                            <select id="search-category" name="category_id">
                                <option value="">All</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="search-text">Search in Message</label>
                            <input type="text" id="search-text" name="search_text" 
                                   placeholder="Enter keywords to search...">
                        </div>

                        <div class="form-group col-md-6">
                            <label for="search-technician">Technician</label>
                            <select id="search-technician" name="technician_id">
                                <option value="">All</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Search</button>
                        <button type="button" class="btn btn-secondary" onclick="resetSearchForm()">Reset</button>
                        <button type="button" class="btn btn-success" onclick="exportSearchResults('pdf')" style="margin-left: auto;">
                            Export PDF
                        </button>
                        <button type="button" class="btn btn-success" onclick="exportSearchResults('excel')">
                            Export Excel
                        </button>
                    </div>
                </form>
            </div>

            <div class="section-header">
                <h3>Search Results</h3>
                <span id="search-results-count"></span>
            </div>

            <div id="search-results-container">
                <div class="empty-state">
                    <p>Use the search form above to find logbook entries</p>
                </div>
            </div>
        </div>

        <!-- Technicians Page -->
        <div class="page" id="technicians-page">
            <div class="page-header">
                <h2>Technician Management</h2>
                <p>Manage technicians for substations</p>
                <button class="btn btn-primary" onclick="showAddTechnicianModal()">
                    ‚ûï Add Technician
                </button>
            </div>

            <div class="filter-section">
                <select id="tech-substation-filter" class="form-control" onchange="loadTechnicians()">
                    <option value="">Select Substation</option>
                </select>
            </div>

            <div id="technicians-table-container">
                <table class="data-table" id="technicians-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Employee ID</th>
                            <th>Designation</th>
                            <th>Contact</th>
                            <th>Email</th>
                            <th>Substation</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="technicians-tbody">
                        <tr>
                            <td colspan="8" class="text-center">Select a substation to view technicians</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Substations Page -->
        <div class="page" id="substations-page">
            <div class="page-header">
                <h2>Substation Management</h2>
                <p>Manage all electrical substations</p>
                <button class="btn btn-primary" onclick="showAddSubstationModal()">
                    ‚ûï Add Substation
                </button>
            </div>

            <div id="substations-table-container">
                <table class="data-table" id="substations-table">
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Name</th>
                            <th>Location</th>
                            <th>Voltage Level</th>
                            <th>Capacity</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="substations-tbody">
                        <tr>
                            <td colspan="7" class="text-center">Loading...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Users Page -->
        <div class="page" id="users-page">
            <div class="page-header">
                <h2>User Management</h2>
                <p>Manage admin and engineer accounts</p>
                <button class="btn btn-primary" onclick="showAddUserModal()">
                    ‚ûï Add User
                </button>
            </div>

            <div id="users-table-container">
                <table class="data-table" id="users-table">
                    <thead>
                        <tr>
                            <th>Username</th>
                            <th>Full Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Substation</th>
                            <th>Status</th>
                            <th>Last Login</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="users-tbody">
                        <tr>
                            <td colspan="8" class="text-center">Loading...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Settings Page -->
        <div class="page" id="settings-page">
            <div class="page-header">
                <h2>System Settings</h2>
                <p>Configure system settings and master data</p>
            </div>

            <!-- Email Configuration -->
            <div class="settings-section">
                <div class="section-header">
                    <h3>üìß Email Configuration</h3>
                </div>
                <form id="email-config-form" class="form-grid">
                    <div class="form-group">
                        <label>SMTP Host *</label>
                        <input type="text" id="smtp-host" class="form-control" placeholder="smtp.gmail.com" required>
                    </div>
                    <div class="form-group">
                        <label>SMTP Port *</label>
                        <input type="number" id="smtp-port" class="form-control" value="587" required>
                    </div>
                    <div class="form-group">
                        <label>SMTP User (Email) *</label>
                        <input type="email" id="smtp-user" class="form-control" placeholder="your-email@gmail.com" required>
                    </div>
                    <div class="form-group">
                        <label>SMTP Password *</label>
                        <input type="password" id="smtp-password" class="form-control" placeholder="App Password" required>
                    </div>
                    <div class="form-group">
                        <label>From Email *</label>
                        <input type="email" id="from-email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>From Name</label>
                        <input type="text" id="from-name" class="form-control" value="Substation Logbook">
                    </div>
                    <div class="form-group">
                        <label>Use SSL</label>
                        <select id="smtp-secure" class="form-control">
                            <option value="false">TLS (Port 587)</option>
                            <option value="true">SSL (Port 465)</option>
                        </select>
                    </div>
                    <div class="form-group" style="grid-column: span 2;">
                        <button type="submit" class="btn btn-primary">üíæ Save Email Configuration</button>
                    </div>
                </form>
                <div id="email-config-alert"></div>
            </div>

            <!-- Equipment Types -->
            <div class="settings-section">
                <div class="section-header">
                    <h3>üîß Equipment Types</h3>
                    <button class="btn btn-sm btn-primary" onclick="showAddEquipmentModal()">‚ûï Add Equipment</button>
                </div>
                <div id="equipment-list" class="tags-list"></div>
            </div>

            <!-- Event Categories -->
            <div class="settings-section">
                <div class="section-header">
                    <h3>üìã Event Categories</h3>
                    <button class="btn btn-sm btn-primary" onclick="showAddCategoryModal()">‚ûï Add Category</button>
                </div>
                <div id="category-list" class="tags-list"></div>
            </div>

            <!-- Backup Management -->
            <div class="settings-section">
                <div class="section-header">
                    <h3>üíæ Database Backup</h3>
                    <button class="btn btn-sm btn-primary" onclick="createManualBackup()">üîÑ Create Backup Now</button>
                </div>
                <div id="backup-alert"></div>
                <h4 style="margin-top: 20px;">Backup History</h4>
                <table class="data-table" id="backup-table">
                    <thead>
                        <tr>
                            <th>Filename</th>
                            <th>Date & Time</th>
                            <th>Size (MB)</th>
                            <th>Type</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="backup-tbody">
                        <tr>
                            <td colspan="6" class="text-center">Loading backup history...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Reports Page -->
        <div class="page" id="reports-page">
            <div class="page-header">
                <h2>Reports & Analytics</h2>
                <p>Generate and view reports</p>
            </div>

            <!-- Daily Summary -->
            <div class="report-section">
                <div class="section-header">
                    <h3>üìÖ Daily Summary</h3>
                </div>
                <form id="daily-report-form" class="form-inline">
                    <input type="date" id="daily-report-date" class="form-control" required>
                    <select id="daily-report-substation" class="form-control">
                        <option value="">All Substations</option>
                    </select>
                    <button type="submit" class="btn btn-primary">Generate Report</button>
                </form>
                <div id="daily-report-result"></div>
            </div>

            <!-- Monthly Summary -->
            <div class="report-section">
                <div class="section-header">
                    <h3>üìä Monthly Summary</h3>
                </div>
                <form id="monthly-report-form" class="form-inline">
                    <select id="monthly-report-month" class="form-control" required>
                        <option value="">Select Month</option>
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                    <select id="monthly-report-year" class="form-control" required>
                        <option value="">Select Year</option>
                    </select>
                    <select id="monthly-report-substation" class="form-control">
                        <option value="">All Substations</option>
                    </select>
                    <button type="submit" class="btn btn-primary">Generate Report</button>
                </form>
                <div id="monthly-report-result"></div>
            </div>
        </div>
    </main>

    <!-- Entry Detail Modal -->
    <div class="modal" id="entry-detail-modal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Logbook Entry Details</h3>
                    <button class="modal-close" onclick="closeModal('entry-detail-modal')">&times;</button>
                </div>
                <div class="modal-body" id="entry-detail-content">
                    <!-- Dynamically populated -->
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal('entry-detail-modal')">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Technician Modal -->
    <div class="modal" id="technician-modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="technician-modal-title">Add Technician</h3>
                    <button class="modal-close" onclick="closeModal('technician-modal')">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="technician-form">
                        <input type="hidden" id="tech-id">
                        <div class="form-group">
                            <label>Substation *</label>
                            <select id="tech-substation" class="form-control" required>
                                <option value="">Select Substation</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Name *</label>
                            <input type="text" id="tech-name" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Employee ID *</label>
                            <input type="text" id="tech-emp-id" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Designation</label>
                            <input type="text" id="tech-designation" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>Contact Number</label>
                            <input type="tel" id="tech-contact" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="tech-email" class="form-control">
                        </div>
                        <div id="tech-form-alert"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal('technician-modal')">Cancel</button>
                    <button class="btn btn-primary" onclick="saveTechnician()">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Substation Modal -->
    <div class="modal" id="substation-modal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="substation-modal-title">Add Substation</h3>
                    <button class="modal-close" onclick="closeModal('substation-modal')">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="substation-form" class="form-grid">
                        <input type="hidden" id="sub-id">
                        <div class="form-group">
                            <label>Substation Code *</label>
                            <input type="text" id="sub-code" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Substation Name *</label>
                            <input type="text" id="sub-name" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Location</label>
                            <input type="text" id="sub-location" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>Voltage Level</label>
                            <input type="text" id="sub-voltage" class="form-control" placeholder="e.g., 33 kV">
                        </div>
                        <div class="form-group">
                            <label>Installed Capacity</label>
                            <input type="text" id="sub-capacity" class="form-control" placeholder="e.g., 50 MW">
                        </div>
                        <div class="form-group">
                            <label>Password *</label>
                            <input type="password" id="sub-password" class="form-control">
                            <small class="form-text">Leave blank to keep existing password when editing</small>
                        </div>
                        <div class="form-group" style="grid-column: span 2;">
                            <label>Contact Information</label>
                            <textarea id="sub-contact" class="form-control" rows="3"></textarea>
                        </div>
                        <div id="sub-form-alert" style="grid-column: span 2;"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal('substation-modal')">Cancel</button>
                    <button class="btn btn-primary" onclick="saveSubstation()">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- User Modal -->
    <div class="modal" id="user-modal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="user-modal-title">Add User</h3>
                    <button class="modal-close" onclick="closeModal('user-modal')">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="user-form" class="form-grid">
                        <input type="hidden" id="user-id">
                        <div class="form-group">
                            <label>Username *</label>
                            <input type="text" id="user-username" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Full Name *</label>
                            <input type="text" id="user-fullname" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Email *</label>
                            <input type="email" id="user-email" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Phone</label>
                            <input type="tel" id="user-phone" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>Employee ID</label>
                            <input type="text" id="user-emp-id" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>Role *</label>
                            <select id="user-role" class="form-control" required onchange="toggleSubstationField()">
                                <option value="">Select Role</option>
                                <option value="admin">Admin</option>
                                <option value="engineer">Engineer</option>
                            </select>
                        </div>
                        <div class="form-group" id="user-substation-group" style="display: none;">
                            <label>Assigned Substation *</label>
                            <select id="user-substation" class="form-control">
                                <option value="">Select Substation</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Password *</label>
                            <input type="password" id="user-password" class="form-control" minlength="8">
                            <small class="form-text">Min 8 characters. Leave blank when editing to keep existing.</small>
                            <div id="password-requirements" class="password-requirements" style="display: none;">
                                <small>Password must contain:</small>
                                <ul>
                                    <li id="req-length">At least 8 characters</li>
                                    <li id="req-uppercase">One uppercase letter</li>
                                    <li id="req-lowercase">One lowercase letter</li>
                                    <li id="req-number">One number</li>
                                </ul>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Confirm Password *</label>
                            <input type="password" id="user-password-confirm" class="form-control" minlength="8">
                        </div>
                        <div id="user-form-alert" style="grid-column: span 2;"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal('user-modal')">Cancel</button>
                    <button class="btn btn-primary" onclick="saveUser()">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Equipment Modal -->
    <div class="modal" id="equipment-modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Add Equipment Type</h3>
                    <button class="modal-close" onclick="closeModal('equipment-modal')">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="equipment-form">
                        <div class="form-group">
                            <label>Equipment Name *</label>
                            <input type="text" id="equipment-name" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="equipment-desc" class="form-control" rows="3"></textarea>
                        </div>
                        <div id="equipment-form-alert"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal('equipment-modal')">Cancel</button>
                    <button class="btn btn-primary" onclick="saveEquipment()">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Category Modal -->
    <div class="modal" id="category-modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Add Event Category</h3>
                    <button class="modal-close" onclick="closeModal('category-modal')">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="category-form">
                        <div class="form-group">
                            <label>Category Name *</label>
                            <input type="text" id="category-name" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="category-desc" class="form-control" rows="3"></textarea>
                        </div>
                        <div id="category-form-alert"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal('category-modal')">Cancel</button>
                    <button class="btn btn-primary" onclick="saveCategory()">Save</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/post.js"></script>
    <script src="js/search.js"></script>
    <script src="js/technicians.js"></script>
    <script src="js/substations.js"></script>
    <script src="js/users.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/reports.js"></script>
</body>
</html>
